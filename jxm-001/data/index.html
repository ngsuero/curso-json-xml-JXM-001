<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
    </head>
    <body>
    </body>
    <script>
        const button1 = document.createElement('button');
        button1.innerHTML = 'Ver Disponibles'
        document.body.appendChild(button1);

        const button2 = document.createElement('button');
        button2.innerHTML = 'Ver Todos'
        document.body.appendChild(button2);

        const button3 = document.createElement('button');
        button3.innerHTML = 'Ver menos 50e'
        document.body.appendChild(button3);

        const div = document.createElement('div');
        div.id = 'catalogo';
        document.body.appendChild(div);
        div.style.padding = '10px';
        div.style.border = '1px solid #ccc';
        div.textContent = 'Catálogo listo para mostrarse...';


        function dibujarCatalogo(lista) {
            const html = lista.map(p => `
                <div style="border:1px solid #aaa;margin:6px;padding:6px;border-radius:4px;">
                <strong>${p.nombre}</strong><br>
                Precio: ${p.precio}€<br>
                Stock: ${p.stock}
                </div>
            `).join('');

            document.getElementById('catalogo').innerHTML = html;
        }




        (async () => {
            const productos = await fetch(new URL('https://organic-space-parakeet-6pv76qxwpp2x5pg-5500.app.github.dev/products.json'))
                .then(r => r.json());

            const disponibles = productos.filter(({stock})=> stock > 0);
            console.log(disponibles);

            const menos50 = productos.filter(({precio}) => precio < 50);
            console.log(disponibles);

            button1.addEventListener('click',() => dibujarCatalogo(disponibles))
            button2.addEventListener('click',() => dibujarCatalogo(productos))
            button3.addEventListener('click',() => dibujarCatalogo(menos50))

            
            dibujarCatalogo(productos);



        })()





    </script>
</html>
